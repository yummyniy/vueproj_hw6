{"version":3,"file":"js/616.423da187.js","mappings":"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","sources":["webpack://hw6/./src/views/CartView.vue","webpack://hw6/./src/views/CartView.vue?73a2"],"sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <h2>購物車</h2>\r\n    <div class=\"text-end\">\r\n      <button class=\"btn btn-outline-danger\" type=\"button\" @click=\"deleteAllCart\" :disabled=\"cartData.carts.length === 0\" >\r\n        清空購物車\r\n      </button>\r\n    </div>\r\n    <table class=\"table align-middle\">\r\n      <thead>\r\n        <tr>\r\n          <th></th>\r\n          <th>品名</th>\r\n          <th style=\"width: 150px\">數量/單位</th>\r\n          <th>單價</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <template v-if=\"cartData.carts\">\r\n          <tr v-for=\"item in cartData.carts\" :key=\"item.id\">\r\n            <td>\r\n              <button type=\"button\" class=\"btn btn-outline-danger btn-sm\" @click=\"deleteCart(item.id)\">\r\n                <i class=\"fas fa-spinner fa-pulse\" v-show=\"isLoadingID === item.id\"></i>x\r\n              </button>\r\n            </td>\r\n            <td>\r\n              {{ item.product.title }}\r\n              <div class=\"text-success\" v-if=\"item.coupon\">已套用優惠券</div>\r\n            </td>\r\n            <td>\r\n              <div class=\"input-group input-group-sm\">\r\n                <div class=\"input-group mb-3\">\r\n                  <input min=\"1\" type=\"number\" class=\"form-control\" v-model.number=\"item.qty\" @blur=\"updateCart(item)\" :disabled=\"isLoadingID === item.id\"/>\r\n                  <span class=\"input-group-text\" id=\"basic-addon2\">{{item.product.unit}}</span>\r\n                </div>\r\n              </div>\r\n            </td>\r\n            <td class=\"text-end\">\r\n              <small class=\"text-success\">折扣價：</small>{{ item.product.price }}\r\n            </td>\r\n          </tr>\r\n        </template>\r\n      </tbody>\r\n      <tfoot>\r\n        <tr>\r\n          <td colspan=\"3\" class=\"text-end\">總計</td>\r\n          <td class=\"text-end\">{{ cartData.total }}</td>\r\n        </tr>\r\n        <tr v-if=\"cartData.final_total !== cartData.total\">\r\n          <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\r\n          <td class=\"text-end text-success\">{{ cartData.final_total }}</td>\r\n        </tr>\r\n      </tfoot>\r\n    </table>\r\n    <div class=\"my-5 row justify-content-center\">\r\n      <v-form ref=\"form\" class=\"col-md-6\" v-slot=\"{ errors }\" @submit=\"createOrder\">\r\n        <div class=\"mb-3\">\r\n          <label for=\"email\" class=\"form-label\">Email</label>\r\n          <v-Field id=\"email\" name=\"email\" type=\"email\" class=\"form-control\" :class=\"{ 'is-invalid': errors['email'] }\" placeholder=\"請輸入 Email\" rules=\"email|required\" v-model=\"form.user.email\"></v-Field>\r\n          <error-message name=\"email\" class=\"invalid-feedback\"></error-message>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"name\" class=\"form-label\">收件人姓名</label>\r\n          <v-field id=\"name\" name=\"姓名\" type=\"text\" class=\"form-control\" :class=\"{ 'is-invalid': errors['姓名'] }\" placeholder=\"請輸入姓名\" rules=\"required\" v-model=\"form.user.name\"></v-field>\r\n          <error-message name=\"姓名\" class=\"invalid-feedback\"></error-message>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"tel\" class=\"form-label\">收件人電話</label>\r\n          <v-field id=\"tel\" name=\"電話\" type=\"text\" class=\"form-control\" :class=\"{ 'is-invalid': errors['電話'] }\" placeholder=\"請輸入電話\" rules=\"required|min:8|max:10\" v-model=\"form.user.tel\"></v-field>\r\n          <error-message name=\"電話\" class=\"invalid-feedback\"></error-message>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"address\" class=\"form-label\">收件人地址</label>\r\n          <v-field id=\"address\" name=\"地址\" type=\"text\" class=\"form-control\" :class=\"{ 'is-invalid': errors['地址'] }\" placeholder=\"請輸入地址\" rules=\"required\" v-model=\"form.user.address\"></v-field>\r\n          <error-message name=\"地址\" class=\"invalid-feedback\"></error-message>\r\n        </div>\r\n\r\n        <div class=\"mb-3\">\r\n          <label for=\"message\" class=\"form-label\">留言</label>\r\n          <textarea id=\"message\" class=\"form-control\" cols=\"30\" rows=\"10\" v-model=\"form.message\"></textarea>\r\n        </div>\r\n        <div class=\"text-end\">\r\n          <button type=\"submit\" class=\"btn btn-danger\" :disabled=\"Object.keys(errors).length > 0 || cartData.carts.length === 0\">送出訂單</button>\r\n        </div>\r\n      </v-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nexport default {\r\n  data () {\r\n    return {\r\n      cartData: {\r\n        carts: []\r\n      },\r\n      isLoadingID: '',\r\n      form: {\r\n        user: {\r\n          name: '',\r\n          email: '',\r\n          tel: '',\r\n          address: ''\r\n        },\r\n        message: ''\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    getCarts () {\r\n      this.$http.get(process.env.VUE_APP_API + '/api/' + process.env.VUE_APP_PATH + '/cart')\r\n        .then((res) => {\r\n          this.cartData = res.data.data\r\n        })\r\n    },\r\n    updateCart (item) {\r\n      const data = {\r\n        product_id: item.id,\r\n        qty: item.qty\r\n      }\r\n      this.$http.put(process.env.VUE_APP_API + '/api/' + process.env.VUE_APP_PATH + '/cart/' + item.id, { data })\r\n        .then((res) => {\r\n          this.getCarts()\r\n          this.isLoadingID = ''\r\n          alert(res.data.message)\r\n        })\r\n    },\r\n    deleteCart (id) {\r\n      this.isLoadingID = id\r\n      this.$http.delete(process.env.VUE_APP_API + '/api/' + process.env.VUE_APP_PATH + '/cart/' + id)\r\n        .then((res) => {\r\n          this.getCarts()\r\n          this.isLoadingID = ''\r\n          alert(res.data.message)\r\n        })\r\n    },\r\n    deleteAllCart () {\r\n      this.$http.delete(process.env.VUE_APP_API + '/api/' + process.env.VUE_APP_PATH + '/carts')\r\n        .then((res) => {\r\n          this.getCarts()\r\n          this.isLoadingID = ''\r\n          alert(res.data.message)\r\n        })\r\n    },\r\n    createOrder () {\r\n      const order = this.form\r\n      this.$http.post(process.env.VUE_APP_API + '/api/' + process.env.VUE_APP_PATH + '/order', { data: order })\r\n        .then((res) => {\r\n          alert(res.data.message)\r\n          this.$refs.form.resetForm()\r\n          // this.deleteAllCart();\r\n          this.getCarts()\r\n          this.isLoadingID = ''\r\n        })\r\n    }\r\n  },\r\n  mounted () {\r\n    this.getCarts()\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./CartView.vue?vue&type=template&id=03c84fb1\"\nimport script from \"./CartView.vue?vue&type=script&lang=js\"\nexport * from \"./CartView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\Self-Study\\\\2022_VueJs\\\\Homework\\\\Project\\\\vueproj_hw6\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","style","id","colspan","for","_createElementBlock","_hoisted_2","type","onClick","$options","disabled","$data","carts","length","_hoisted_4","_hoisted_6","_Fragment","key","_renderList","item","product","title","coupon","min","qty","$event","onBlur","_toDisplayString","unit","_hoisted_16","price","_hoisted_17","total","final_total","_hoisted_19","_hoisted_20","_createVNode","_component_v_form","ref","onSubmit","errors","_hoisted_24","_component_v_Field","name","placeholder","rules","user","email","_component_error_message","_hoisted_26","_component_v_field","_hoisted_28","tel","_hoisted_30","address","_hoisted_32","cols","rows","message","Object","keys","_hoisted_34","data","cartData","isLoadingID","form","methods","getCarts","this","$http","get","process","then","res","updateCart","product_id","put","alert","deleteCart","delete","deleteAllCart","createOrder","order","post","$refs","resetForm","mounted","__exports__","render"],"sourceRoot":""}